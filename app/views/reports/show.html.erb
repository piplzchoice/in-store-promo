<h1 class="page-header">Show Report</h1>

<div class="row" style="margin: 0px;">
  <%= link_to "Download as PDF", download_pdf_report_path(id: @report.id), {class: "btn btn-primary", role: "button"} %>
  <% unless current_user.has_role?(:client) %>
    <%= link_to("Edit Report", edit_report_path(@service.report), {class: "btn btn-primary", role: "button"}) %>
  <% end %>
</div>
<hr>

<div class="row" style="margin: 15px;">
  <div style="text-align: center;margin-bottom: 50px;">
    <h4 style="color: rgb(9, 152, 197);">In Store Marketing Services Demo Report</h4>
  </div>
  <div class="row report">
    <div id="report-client" class="report-left">
      <span class="report-title">Client</span>: 
      <span class="report-option-details"><%= @service.company_name %></span>
    </div>
  </div>

  <div class="row report">
    <div id="report-ba" class="report-left">
      <span class="report-title">Name of BA</span>: 
      <span class="report-option-details"><%= @service.brand_ambassador.nil? ? "-" : @service.brand_ambassador.name %></span>
    </div>

    <div id="report-location">
      <span class="report-title">Location</span>: 
      <span class="report-option-details"><%= @service.location.complete_location %></span>
    </div>
  </div>

  <div class="row report">
    <div id="report-date">
      <span class="report-title">Date/Time</span>: 
      <span class="report-option-details">
        <%= @service.start_at.strftime('%m/%d/%Y') %>: <%= @service.time_at %>
      </span>
    </div>
  </div>

  <div class="row report">
    <div id="report-demo-in-store">
      <span class="report-title">Location of demo in store</span>: <%= @report.demo_in_store %>
    </div>
  </div>

  <div class="row report">
    <div id="report-weather" class="report-left">
      <span class="report-title">Weather</span>: 
      <%= @report.weather %>
    </div>

    <div id="report-traffic">
      <span class="report-title">Traffic</span>: 
      <%= @report.traffic %>
    </div>
  </div>

  <div class="row report">
    <div id="report-busiest-hours" class="report-left">
      <span class="report-title">Busiest hours of demo</span>: <%= @report.busiest_hours %>
    </div>
  </div>

  <div class="row report">
    <div id="report-product" class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
              <th><span class="report-title">Price</span></th>
              <th><span class="report-title">Sample</span></th>            
            <th><span class="report-title">Beginning</span></th>
            <th><span class="report-title">End</span></th>
            <th><span class="report-title">Sold</span></th>
          </tr>
        </thead>
        <tbody>  
          <% if !@report.client_products.nil? %>
            <%= render "client_products_show" %>
          <% else %>
            <%= render "products_show" %>
          <% end %>          
        </tbody>
      </table>
    </div>
  </div>

  <div class="row report">
    <div id="report-sample-product">
      <span class="report-title">Sample product</span>: <%= @report.sample_product %>
    </div>
  </div>    

  <div class="row report">
    <div id="report-est-customer-touched" class="report-left">
      <span class="report-title">Estimated # of customers touched</span>: 
      <%= @report.est_customer_touched %>
    </div>

    <div id="report-est-sample-given">
      <span class="report-title">Estimated # of sample given</span>: 
      <%= @report.est_sample_given %>
    </div>
  </div>

  <div class="row report">
    <div id="report-sample-product">
      <span class="report-title">Expense</span>: <%= number_to_currency @report.expense_one %>
      <% unless @report.expense_one_img.nil? %>
        <%= image_tag @report.expense_one_img.url %>
      <% end %>
    </div>
  </div>  

  <% unless @report.travel_expense.nil? %>
    <div class="row report">
      <div id="report-expense-one">
        <span class="report-title">Travel Expense</span>: <%= number_to_currency @report.travel_expense %>
      </div>
    </div>      
  <% end %>

  <div class="row report">
    <div id="report-expense-two">
      <span class="report-title">Customer Comments</span>: 
      <p><%= @report.customer_comments %></p>
    </div>
  </div>      

  <div class="row report">
    <div id="report-sample-product">
      <span class="report-title">BA Comments</span>: 
      <p><%= @report.ba_comments %></p>
    </div>
  </div>  

  <div class="row report">
    <div id="report-attach-table">
      <span class="report-title">Attach Table Image</span>:
      <% unless @report.table_image_one_img.nil? %>
        <%= image_tag @report.table_image_one_img.url %>
      <% end %> 
      <br />
      <% unless @report.table_image_two_img.nil? %>
        <%= image_tag @report.table_image_two_img.url %>
      <% end %>            
    </div>
  </div>             

</div>