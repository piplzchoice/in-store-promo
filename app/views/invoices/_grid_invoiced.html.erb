<table id="table-data" class="table table-striped">
  <thead>
    <tr>
      <th>Client Name</th>
      <th><%= sortable "issue_date", "Invoice Date" %></th>
      <th>Grand Total</th>
      <th><%= sortable "due_date", "Due Date" %></th>
      <th>Amount Rec</th>
      <th>Data Rec</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @invoices.each_with_index do |invoice, i|  %>      
      <tr>
        <%= form_for(invoice) do |f| %>
          <td><%= invoice.client.company_name %></td>
          <td><%= invoice.issue_date.nil? ? invoice.created_at.strftime('%m/%d/%Y') : invoice.issue_date.strftime('%m/%d/%Y') %></td>      
          <td><%= number_to_currency invoice.grand_total_all %></td> 
          <td><%= invoice.due_date.nil? ? "-" : invoice.due_date.strftime('%m/%d/%Y') %></td>            
          <td>
            <%= @paid ? (invoice.amount_received.nil? ? "-" : number_to_currency(invoice.amount_received)) : f.text_field(:amount_received, {pattern: '[-+]?[0-9]*[.,]?[0-9]+', class: "form-control"}) %>
          </td>
          <td>
            <%= @paid ? (invoice.date_received.nil? ? "-" : invoice.date_received.strftime('%m/%d/%Y')) : f.text_field(:date_received, {class: "date-received-invoice form-control"}) %>
          </td>          
          <td>        
            <%= f.submit("Update Invoice to Paid", class: "btn btn-primary update-invoice") unless @paid %>
          </td>
          <td><%= link_to("Show Invoice", invoice_path(invoice), class: "btn btn-primary update-invoice" ) %></td> 
        <% end  %>
      </tr>      
    <% end %>
  </tbody>
</table>
