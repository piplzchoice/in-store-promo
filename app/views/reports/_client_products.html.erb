<% if @report.new_record? %>
  <% client.products[0..5].each_with_index do |product, i| %>
    <tr>
      <td>Product <%= i + 1 %></td>
      <td id="product-<%= number_to_words(i + 1) %>" data-id="<%= number_to_words(i + 1) %>">            
        <div class="dropdown">
          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
            <%= product.name %>
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Change</a></li>
          </ul>
          <%= hidden_field_tag 'report[client_products][]name', product.name %>
        </div>      
      </td>
      <td id="product-<%= number_to_words(i + 1) %>-price" data-id="<%= number_to_words(i + 1) %>">
        <%= text_field_tag("report[client_products][]price", nil, {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_price"}) %>
      </td>              
      <td id="product-<%= number_to_words(i + 1) %>-sample" data-id="<%= number_to_words(i + 1) %>" class="product-sample">
        <%= text_field_tag("report[client_products][]sample", nil, {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_sample"}) %>
      </td>                            
      <td id="product-<%= number_to_words(i + 1) %>-beginning" data-id="<%= number_to_words(i + 1) %>" class="product-beginning">
        <%= text_field_tag("report[client_products][]beginning", nil, {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_beginning"}) %>
      </td>
      <td id="product-<%= number_to_words(i + 1) %>-end" data-id="<%= number_to_words(i + 1) %>" class="product-end">
        <%= text_field_tag("report[client_products][]end", nil, {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_end"}) %>
      </td>
      <td id="product-<%= number_to_words(i + 1) %>-sold" data-id="<%= number_to_words(i + 1) %>" class="product-sold">
        <%= text_field_tag("report[client_products][]sold", nil, {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_sold"}) %>
      </td>
    </tr>
  <% end %>
<% else %>
  <% @report.client_products.each_with_index do |product, i| %>
    <tr>
      <td>Product <%= i + 1 %></td>
      <td id="product-<%= number_to_words(i + 1) %>" data-id="<%= number_to_words(i + 1) %>">            
        <div class="dropdown">
          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
            <%= product["name"] %>
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Change</a></li>
          </ul>
          <%= hidden_field_tag 'report[client_products][]name', product["name"] %>
        </div>      
      </td>
      <td id="product-<%= number_to_words(i + 1) %>-price" data-id="<%= number_to_words(i + 1) %>">
        <%= text_field_tag("report[client_products][]price", product["price"], {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_price"}) %>
      </td>              
      <td id="product-<%= number_to_words(i + 1) %>-sample" data-id="<%= number_to_words(i + 1) %>" class="product-sample">
        <%= text_field_tag("report[client_products][]sample", product["sample"], {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_sample"}) %>
      </td>                            
      <td id="product-<%= number_to_words(i + 1) %>-beginning" data-id="<%= number_to_words(i + 1) %>" class="product-beginning">
        <%= text_field_tag("report[client_products][]beginning", product["beginning"], {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_beginning"}) %>
      </td>
      <td id="product-<%= number_to_words(i + 1) %>-end" data-id="<%= number_to_words(i + 1) %>" class="product-end">
        <%= text_field_tag("report[client_products][]end", product["end"], {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_end"}) %>
      </td>
      <td id="product-<%= number_to_words(i + 1) %>-sold" data-id="<%= number_to_words(i + 1) %>" class="product-sold">
        <%= text_field_tag("report[client_products][]sold", product["sold"], {class: "width_35px", id: "report_product_#{number_to_words(i + 1)}_sold"}) %>
      </td>
    </tr>
  <% end %>
<% end %>